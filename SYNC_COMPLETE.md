# ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –±—ç–∫–µ–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±—ç–∫–µ–Ω–¥ –±—ã–ª–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã:
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–ª –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `application/x-www-form-urlencoded`
- –ë—ç–∫–µ–Ω–¥ –æ–∂–∏–¥–∞–ª –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `application/json`
- –ú–µ—Ç–æ–¥—ã –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –æ–±—Ä–∞—â–∞–ª–∏—Å—å –Ω–∞–ø—Ä—è–º—É—é –∫ API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. YandexAuthService –æ–±–Ω–æ–≤–ª–µ–Ω:

#### ‚úÖ –û–±–º–µ–Ω –∫–æ–¥–∞ –Ω–∞ —Ç–æ–∫–µ–Ω:
```typescript
// –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const body = new URLSearchParams({
  grant_type: 'authorization_code',
  code: code,
  client_id: this.clientId,
});
const headers = new HttpHeaders({
  'Content-Type': 'application/x-www-form-urlencoded'
});

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const body = {
  code: code,
  redirectUri: this.getRedirectUri()
};
const headers = new HttpHeaders({
  'Content-Type': 'application/json'
});
```

#### ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:
```typescript
// –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const response = await this.http.get<YandexUser>(this.userInfoUrl, { headers }).toPromise();

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const body = { accessToken: accessToken };
const response = await this.http.post<YandexUser>(this.userInfoUrl, body, { headers }).toPromise();
```

### 2. GoogleAuthService —É–∂–µ –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚úÖ

### 3. –ë—ç–∫–µ–Ω–¥ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ ‚úÖ

## üìã –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| **YandexAuthService** | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±—ç–∫–µ–Ω–¥ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π |
| **GoogleAuthService** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –£–∂–µ –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω |
| **–ë—ç–∫–µ–Ω–¥ Yandex** | ‚úÖ –ì–æ—Ç–æ–≤ | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç JSON –∑–∞–ø—Ä–æ—Å—ã |
| **–ë—ç–∫–µ–Ω–¥ Google** | ‚úÖ –ì–æ—Ç–æ–≤ | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç JSON –∑–∞–ø—Ä–æ—Å—ã |
| **–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–±–æ—Ä–∫–∞** | ‚úÖ –£—Å–ø–µ—à–Ω–∞ | –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ |

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±—ç–∫–µ–Ω–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã:

1. **–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ –±—ç–∫–µ–Ω–¥** - –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ
2. **–ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö** - JSON –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
curl http://localhost:3000/api/auth/yandex/status
```

### –¢–µ—Å—Ç –æ–±–º–µ–Ω–∞ –∫–æ–¥–∞ (–æ–∂–∏–¥–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ–¥–∞):
```bash
curl -X POST http://localhost:3000/api/auth/yandex/token \
  -H "Content-Type: application/json" \
  -d '{"code": "test", "redirectUri": "http://localhost:8100/yandex-callback"}'
```

### –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (–æ–∂–∏–¥–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ç–æ–∫–µ–Ω–∞):
```bash
curl -X POST http://localhost:3000/api/auth/yandex/userinfo \
  -H "Content-Type: application/json" \
  -d '{"accessToken": "test"}'
```

## ‚ú® –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Yandex –∏ Google –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –±–µ–∑ –æ—à–∏–±–æ–∫ 404 –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º —Å —Ñ–æ—Ä–º–∞—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö.
