# Настройка Yandex OAuth

## Проблема
Ошибка "Failed to exchange Yandex authorization code" возникает из-за того, что учетные данные Yandex OAuth не настроены в файле `.env`.

## Решение

### 1. Создание приложения в Yandex OAuth

1. Перейдите на [Yandex OAuth](https://oauth.yandex.ru/)
2. Войдите в свой аккаунт Yandex
3. Нажмите "Создать приложение"
4. Заполните форму:
   - **Название**: Secure Auth App (или любое другое название)
   - **Описание**: Приложение для аутентификации через Yandex
   - **Callback URI**: `http://localhost:3000/auth/yandex/callback`
   - **Платформы**: Web-сервисы
5. Нажмите "Создать"

### 2. Получение учетных данных

После создания приложения вы получите:
- **Client ID** (ID приложения)
- **Client Secret** (Пароль приложения)

### 3. Настройка файла .env

Откройте файл `/backend/.env` и замените значения по умолчанию:

```env
# Yandex OAuth Configuration
YANDEX_CLIENT_ID=ваш-client-id-от-yandex
YANDEX_CLIENT_SECRET=ваш-client-secret-от-yandex
YANDEX_CALLBACK_URL=http://localhost:3000/auth/yandex/callback
```

### 4. Перезапуск сервера

После изменения файла `.env` перезапустите сервер:

```bash
cd backend
npm run start:dev
```

## Проверка настройки

Теперь при попытке аутентификации через Yandex вы должны увидеть в логах:
- "Получен запрос на обмен кода Yandex" с информацией о конфигурации
- "Успешно получен токен от Yandex" при успешной аутентификации

## Дополнительные настройки

### Для продакшена

Для продакшена измените:
- `YANDEX_CALLBACK_URL` на ваш домен
- Добавьте домен в настройки приложения Yandex

### Права доступа

В настройках приложения Yandex убедитесь, что включены необходимые права:
- Доступ к адресу электронной почты
- Доступ к имени, фамилии, полу и дате рождения
- Доступ к аватару
